<html>
<head>
  <style>
  .chartWithMarkerOverlay {
   position: relative;
   width: 400px;
 }

 .overlay-text {
   width: 50px;
   height: 50px;
   position: absolute;
   top: 140px;   /* chartArea top */
   left: 250px; /* chartArea left */
 }
</style>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">

      // Load Charts and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      google.charts.setOnLoadCallback(drawChart1);
      google.charts.setOnLoadCallback(drawChart2);

      function drawChart1() {
        var data = google.visualization.arrayToDataTable([
          ['범죄', '평균 발생 건수'],
          ['성범죄 외', 342118],
          ['성범죄', 8780]
          ]);

        var options = {
          title: '서울시 성범죄 발생률 (2014년-2016년)',
          width:400,
          height:300,
          legend:'right',
          //pieHole: 0.4,
          //pieSliceText: 'label', 
          pieStartAngle: 110,
          slices: {  
            0: { color: 'gray' },
            1: { offset: 0.3},
          },
        };

        function placeMarker(dataTable) {
          var cli = this.getChartLayoutInterface();
          var chartArea = cli.getChartAreaBoundingBox();
         // '성범죄' is element #1.
         document.querySelector('.overlay-text').style.top = Math.floor(cli.getYLocation(dataTable.getValue(1, 1))) - 50 + "px";
         document.querySelector('.overlay-text').style.left = Math.floor(cli.getXLocation(1)) - 10 + "px";
       };

       var chart = new google.visualization.PieChart(document.getElementById('piechart1'));
       google.visualization.events.addListener(chart, 'ready', placeMarker.bind(chart, data));
       chart.draw(data, options);      
     }


// 2번째 파이차트 그리기      
function drawChart2() {
  var data = google.visualization.arrayToDataTable([
    ['범죄유형', '평균 발생 건수'],
    ['강간 및 강제추행', 5650], ['카메라 등 이용촬영', 2749], 
    ['통신매체 이용 음란', 260], ['성적목적 공공장소 침입', 121]
    ]);

  var options = {
   title:'서울시 성범죄 유형별 발생률 (2014년-2016년)',
   width:400,
   height:300,
   legend:'right',
             //pieHole: 0.4,
             colors: ['#e0440e', '#e6693e', '#ec8f6e', '#f3b49f']         
           };

           var chart = new google.visualization.PieChart(document.getElementById('piechart2'));
           chart.draw(data, options);
         }
       </script>
     </head>

     
     <body>
      <!--Table and divs that hold the pie charts-->
      <table class="columns">
        <tr>
          <td>
            <div class="chartWithMarkerOverlay">
              <div id="piechart1" style="border: 1px solid #ccc"></div>
              <div class="overlay-text">
                <div style="color: #b44; font-family:'Arial Black'; font-size: 12px; margin-top:3px; margin-left:10px;">
                성범죄</div>
                <div style="color: #444; font-family:'Arial Black'; font-size: 12px; margin-top:3px; margin-left:15px;">
                2.5%</div>
                <!-- <div style="color: #444; font-family:'Arial Black'; font-size: 12px; letter-spacing: .15em; margin-top:3px; margin-left:15px;">2.4%</div> -->
              </div>
            </div>
          </td>
          <td><div id="piechart2" style="border: 1px solid #ccc"></div></td>
        </tr>
      </table>
    </body>
    </html>